<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>InCheck Pro Dashboard ‚Äî Issues ¬∑ Ops ¬∑ AI Copilot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
    rel="stylesheet"
  />

  <!-- FullCalendar CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css"
    rel="stylesheet"
  />

  <!-- Local styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <a href="#main" class="sr-only">Skip to main content</a>

  <!-- Header / top bar -->
  <header>
    <button
      id="drawerBtn"
      class="btn ghost drawer-toggle"
      aria-label="Toggle filters"
      aria-expanded="false"
    >
      <span class="icon">‚ò∞</span>
    </button>

    <div class="brand">
      <div class="logo">IC</div>
      <div class="brand-text">
        <span>InCheck Pro</span>
        <span>Issues ¬∑ Ops ¬∑ AI Copilot</span>
      </div>
    </div>

    <div class="statusline">
      <span class="chip" id="syncIssuesText">Issues: ‚Äî</span>
      <span class="dot" id="syncIssuesDot"></span>
      <span class="chip" id="syncEventsText">Events: ‚Äî</span>
      <span class="dot" id="syncEventsDot"></span>
      <span class="chip online" id="onlineStatusChip">Online</span>
      <span class="chip" id="loadingStatus"></span>
    </div>

    <div class="toolbar">
      <input
        id="searchInput"
        class="input"
        type="search"
        placeholder="Search tickets, logs, modules‚Ä¶"
        aria-label="Search issues"
      />

      <select id="themeSelect" class="select sm" aria-label="Theme">
        <option value="system">System</option>
        <option value="dark">Dark</option>
        <option value="light">Light</option>
      </select>

      <input
        type="color"
        id="accentColor"
        aria-label="Accent color"
      />

      <button type="button" id="shortcutsHelp" class="btn ghost sm">
        <span class="icon">‚åò</span>
        <span>Shortcuts</span>
      </button>

      <button type="button" id="refreshNow" class="btn sm">
        <span class="icon">‚ü≥</span>
        <span>Sync</span>
      </button>

      <button type="button" id="createTicketBtn" class="btn primary sm">
        <span class="icon">Ôºã</span>
        <span>New ticket</span>
      </button>
    </div>
  </header>

  <main id="main" class="wrap">
    <!-- Sidebar / filters -->
    <aside class="sidebar" id="sidebar" aria-label="Filters & views">
      <h3>Issue filters</h3>
      <div class="filter-group">
        <div class="filter-row">
          <span class="muted">Module</span>
          <select id="moduleFilter" class="select">
            <option>All</option>
          </select>
        </div>
        <div class="filter-row">
          <span class="muted">Priority</span>
          <select id="priorityFilter" class="select">
            <option>All</option>
          </select>
        </div>
        <div class="filter-row">
          <span class="muted">Status</span>
          <select id="statusFilter" class="select">
            <option>All</option>
          </select>
        </div>
        <div class="filter-row">
          <span class="muted">Created from</span>
          <input id="startDateFilter" type="date" class="input" />
        </div>
        <div class="filter-row">
          <span class="muted">Created to</span>
          <input id="endDateFilter" type="date" class="input" />
        </div>
        <button type="button" id="resetBtn" class="btn sm">Reset filters</button>
      </div>

      <div class="divider"></div>

      <h3>Change calendar</h3>
      <div class="filter-group">
        <span class="muted">Event types</span>
        <label class="muted" style="font-size:12px;">
          <input type="checkbox" id="eventFilterDeployment" checked />
          Deployment
        </label>
        <label class="muted" style="font-size:12px;">
          <input type="checkbox" id="eventFilterMaintenance" checked />
          Maintenance
        </label>
        <label class="muted" style="font-size:12px;">
          <input type="checkbox" id="eventFilterRelease" checked />
          Release
        </label>
        <label class="muted" style="font-size:12px;">
          <input type="checkbox" id="eventFilterOther" checked />
          Other
        </label>
      </div>

      <div class="divider"></div>

      <h3>AI Copilot</h3>
      <p class="muted" style="font-size:12px;">
        Use the AI tab to see patterns, high-risk modules and recommended change windows.
      </p>
    </aside>

    <!-- Main content -->
    <section class="content">
      <!-- Tabs -->
      <div style="display:flex;justify-content:space-between;align-items:flex-end;gap:12px;flex-wrap:wrap;">
        <div class="summary-bar" style="flex:1 1 auto;">
          <div id="issuesSummaryText">‚Äî</div>
          <div class="muted" id="rowCount" style="font-size:12px;">‚Äî</div>
        </div>

        <div class="view-tabs" role="tablist" aria-label="Main views">
          <button
            class="view-tab active"
            id="issuesTab"
            data-view="issues"
            role="tab"
            aria-selected="true"
          >
            <span class="icon">üìã</span>
            <span>Issues</span>
          </button>
          <button
            class="view-tab"
            id="calendarTab"
            data-view="calendar"
            role="tab"
            aria-selected="false"
          >
            <span class="icon">üìÖ</span>
            <span>Calendar</span>
          </button>
          <button
            class="view-tab"
            id="insightsTab"
            data-view="insights"
            role="tab"
            aria-selected="false"
          >
            <span class="icon">ü§ñ</span>
            <span>AI &amp; Planner</span>
          </button>
        </div>
      </div>

      <!-- Active filter chips -->
      <div id="activeFiltersChips" class="filter-chips" style="margin-top:8px;"></div>

      <!-- ISSUES VIEW -->
      <section id="issuesView" class="view active" aria-labelledby="issuesTab">
        <!-- KPIs -->
        <div class="grid cols-4" id="kpis" aria-label="Issue KPIs"></div>

        <!-- Charts -->
        <div class="card">
          <div class="summary-bar" style="margin-bottom:8px;">
            <div>
              <div class="shortcut-chip">Portfolio breakdown</div>
              <div class="muted" style="font-size:12px;">
                Distribution by module, priority, status and type for the current filter set.
              </div>
            </div>
          </div>
          <div class="charts">
            <div style="min-height:220px;">
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">By module</h3>
              <canvas id="byModule"></canvas>
            </div>
            <div style="min-height:220px;">
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">By priority</h3>
              <canvas id="byPriority"></canvas>
            </div>
            <div style="min-height:220px;">
              <h3 class="muted" style="font-size:12px;margin:16px 0 4px;">By status</h3>
              <canvas id="byStatus"></canvas>
            </div>
            <div style="min-height:220px;">
              <h3 class="muted" style="font-size:12px;margin:16px 0 4px;">By type</h3>
              <canvas id="byType"></canvas>
            </div>
          </div>
        </div>

        <!-- Issues table -->
        <section class="card" aria-label="Issues table">
          <div class="summary-bar" style="margin-bottom:8px;">
            <div>
              <div class="shortcut-chip">Tickets</div>
              <div class="muted" style="font-size:12px;">
                Click a row to open the full ticket view, logs and AI risk signals.
              </div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
              <label class="muted" style="font-size:12px;">
                Page size
                <select id="pageSize" class="select sm">
                  <option value="10">10</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </label>
              <button type="button" id="exportCsv" class="btn ghost sm">
                <span class="icon">‚¨á</span>
                <span>Export CSV</span>
              </button>
            </div>
          </div>

          <div class="table-wrap" aria-live="polite">
            <table id="issuesTable">
              <thead>
                <tr>
                  <th class="sortable" data-key="id" scope="col">ID</th>
                  <th class="sortable" data-key="module" scope="col">Module</th>
                  <th class="sortable" data-key="title" scope="col">Title</th>
                  <th class="sortable" data-key="priority" scope="col">Priority</th>
                  <th class="sortable" data-key="status" scope="col">Status</th>
                  <th class="sortable" data-key="date" scope="col">Created</th>
                  <th scope="col">Log</th>
                  <th scope="col">Link</th>
                </tr>
              </thead>
              <tbody id="tbodySkeleton">
                <tr>
                  <td colspan="8">
                    <div class="skeleton" style="height:48px;border-radius:10px;"></div>
                  </td>
                </tr>
                <tr>
                  <td colspan="8">
                    <div class="skeleton" style="height:48px;border-radius:10px;"></div>
                  </td>
                </tr>
                <tr>
                  <td colspan="8">
                    <div class="skeleton" style="height:48px;border-radius:10px;"></div>
                  </td>
                </tr>
              </tbody>
              <tbody id="issuesTbody"></tbody>
            </table>
          </div>

          <div class="table-actions">
            <div class="pagination" aria-label="Pagination">
              <button type="button" id="firstPage" class="chip-btn">‚ü™ First</button>
              <button type="button" id="prevPage" class="chip-btn">‚Äπ Prev</button>
              <span id="pageInfo" class="muted" style="font-size:12px;">Page 1 / 1</span>
              <button type="button" id="nextPage" class="chip-btn">Next ‚Ä∫</button>
              <button type="button" id="lastPage" class="chip-btn">Last ‚ü´</button>
            </div>
          </div>
        </section>
      </section>

      <!-- CALENDAR VIEW -->
      <section id="calendarView" class="view" aria-labelledby="calendarTab">
        <section class="card" aria-label="Change calendar">
          <div class="summary-bar" style="margin-bottom:8px;">
            <div>
              <div class="shortcut-chip">Change calendar</div>
              <div class="muted" style="font-size:12px;">
                Deployments, releases and maintenance windows with risk overlays from open issues.
              </div>
              <div id="calendarTz" class="muted" style="font-size:11px;margin-top:2px;"></div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
              <button type="button" id="addEventBtn" class="btn sm">
                <span class="icon">Ôºã</span>
                <span>New event</span>
              </button>
            </div>
          </div>

          <div id="calendar"></div>
        </section>
      </section>

      <!-- INSIGHTS + RELEASE PLANNER VIEW -->
      <section id="insightsView" class="view" aria-labelledby="insightsTab">
        <!-- AI risk & trends -->
        <section class="card" aria-label="AI Insights">
          <div class="summary-bar" style="margin-bottom:6px;">
            <div>
              <div class="shortcut-chip">AI risk cockpit</div>
              <div class="muted" style="font-size:12px;">
                Text analytics, risk scoring and operational gaps across all tickets and environments.
              </div>
            </div>
            <div id="aiAnalyzing" class="muted" style="font-size:12px;display:none;">
              Analyzing‚Ä¶
            </div>
          </div>

          <div class="grid cols-4">
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Recent patterns</h3>
              <ul id="aiPatternsList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Label suggestions</h3>
              <ul id="aiLabelsList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Rising themes</h3>
              <ul id="aiTrendsList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Top risks (recent)</h3>
              <ul id="aiRisksList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
          </div>

          <div style="margin-top:10px;font-size:13px;">
            <div id="aiScopeText" class="muted" style="margin-bottom:2px;"></div>
            <div id="aiSignalsText" class="muted"></div>
          </div>
        </section>

        <!-- Module risk table (styled specially in CSS with :has) -->
        <section class="card" aria-label="Module risk table">
          <div class="summary-bar" style="margin-bottom:6px;">
            <div>
              <div class="shortcut-chip">Per-module risk &amp; pressure</div>
              <div class="muted" style="font-size:12px;">
                Aggregated risk score, open count and dominant term for each impacted module.
              </div>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th scope="col">Module</th>
                <th scope="col">Open</th>
                <th scope="col">High prio</th>
                <th scope="col">Risk sum</th>
                <th scope="col">Top term</th>
              </tr>
            </thead>
            <tbody id="aiModulesTableBody"></tbody>
          </table>
        </section>

        <!-- Triage / clusters / incidents -->
        <section class="card" aria-label="Triage & operations">
          <div class="summary-bar" style="margin-bottom:6px;">
            <div>
              <div class="shortcut-chip">Ops cockpit</div>
              <div class="muted" style="font-size:12px;">
                Triage queue, similar-issue clusters, calendar-linked risks and operational hygiene checks.
              </div>
            </div>
          </div>

          <div class="grid cols-4">
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Clusters</h3>
              <div id="aiClusters" style="font-size:13px;"></div>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Triage queue</h3>
              <ul id="aiTriageList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Upcoming risky events</h3>
              <ul id="aiEventsList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
              <h3 class="muted" style="font-size:12px;margin:10px 0 4px;">Incidents</h3>
              <ul id="aiIncidentsList" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
            <div>
              <h3 class="muted" style="font-size:12px;margin:0 0 4px;">Emerging vs stable</h3>
              <ul id="aiEmergingStable" style="padding-left:18px;margin:0;font-size:13px;"></ul>
              <h3 class="muted" style="font-size:12px;margin:10px 0 4px;">Ops hygiene</h3>
              <ul id="aiOpsCockpit" style="padding-left:18px;margin:0;font-size:13px;"></ul>
            </div>
          </div>
        </section>

        <!-- AI query / DSL -->
        <section class="card" aria-label="AI query console">
          <div class="summary-bar" style="margin-bottom:6px;">
            <div>
              <div class="shortcut-chip">AI query console</div>
              <div class="muted" style="font-size:12px;">
                Use the DSL (<code>module:</code>, <code>risk&gt;=</code>, <code>severity&gt;=</code>,
                <code>age&gt;7d</code>, <code>last:7d</code>, etc.) to slice the issue set.
              </div>
            </div>
          </div>

          <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:6px;">
            <input
              id="aiQueryInput"
              class="input"
              style="flex:1 1 260px;"
              placeholder="Example: status:open risk>=9 last:7d module:payments"
              aria-label="AI query"
            />
            <button type="button" id="aiQueryRun" class="btn sm">
              <span class="icon">‚ñ∂</span>
              <span>Run</span>
            </button>
            <button type="button" id="aiQueryApplyFilters" class="btn ghost sm">
              <span class="icon">üéØ</span>
              <span>Apply as filters</span>
            </button>
            <button type="button" id="aiQueryExport" class="btn ghost sm">
              <span class="icon">‚¨á</span>
              <span>Export result CSV</span>
            </button>
          </div>

          <div id="aiQueryResults" style="font-size:13px;">
            <span class="muted">No query run yet.</span>
          </div>
        </section>

        <!-- Release Planner ‚Äî F&B Middle East (with assignment) -->
        <section class="card" id="releasePlannerCard" aria-labelledby="releasePlannerTitle">
          <div class="summary-bar">
            <div>
              <div class="shortcut-chip">Release Planner ‚Äî F&amp;B Middle East</div>
              <h2 id="releasePlannerTitle" style="margin:4px 0 2px;font-size:18px;">
                Release Planner ‚Äî F&amp;B Middle East
              </h2>
              <div class="muted" style="font-size:12px;">
                Optimise production releases for Gulf / Levant / North Africa, taking into account
                F&amp;B rush hours, public &amp; religious holidays, historic bug pressure and
                existing change calendar events.
              </div>
            </div>
          </div>

          <!-- Planner configuration -->
          <div class="planner-grid" style="margin-top:12px;">
            <div>
              <label for="plannerRegion" class="muted" style="font-size:12px;">Region profile</label>
              <select id="plannerRegion" class="select sm" style="width:100%;margin-top:4px;">
                <option value="gulf">Gulf (KSA / UAE / Qatar)</option>
                <option value="levant">Levant</option>
                <option value="northafrica">North Africa</option>
              </select>
            </div>

            <div>
              <label for="plannerEnv" class="muted" style="font-size:12px;">Environment</label>
              <select id="plannerEnv" class="select sm" style="width:100%;margin-top:4px;">
                <option value="Prod">Production</option>
                <option value="Staging">Staging</option>
                <option value="Dev">Development</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div>
              <label for="plannerReleaseType" class="muted" style="font-size:12px;">Release type</label>
              <select id="plannerReleaseType" class="select sm" style="width:100%;margin-top:4px;">
                <option value="feature">Feature / normal</option>
                <option value="minor">Minor / patch</option>
                <option value="major">Major / high-impact</option>
              </select>
            </div>

            <div>
              <label for="plannerHorizon" class="muted" style="font-size:12px;">Horizon (days)</label>
              <input
                id="plannerHorizon"
                type="number"
                min="1"
                max="30"
                value="7"
                class="input sm"
                style="width:100%;margin-top:4px;"
              />
            </div>

            <div>
              <label for="plannerSlotsPerDay" class="muted" style="font-size:12px;">Slots per day</label>
              <input
                id="plannerSlotsPerDay"
                type="number"
                min="1"
                max="8"
                value="4"
                class="input sm"
                style="width:100%;margin-top:4px;"
              />
            </div>

            <div>
              <label for="plannerModules" class="muted" style="font-size:12px;">Impacted modules</label>
              <input
                id="plannerModules"
                class="input sm"
                style="width:100%;margin-top:4px;"
                placeholder="e.g. Ordering, Payments (comma-separated, optional)"
              />
            </div>
          </div>

          <div style="margin-top:10px;">
            <label for="plannerDescription" class="muted" style="font-size:12px;">Release notes / scope (optional)</label>
            <textarea
              id="plannerDescription"
              class="input"
              style="width:100%;margin-top:4px;min-height:64px;border-radius:12px;resize:vertical;"
              placeholder="Short description of the change ‚Äì used to detect historical bomb-bug patterns in similar changes."
            ></textarea>
          </div>

          <div style="display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap;">
            <button type="button" id="plannerRun" class="btn primary sm">
              <span class="icon">‚öôÔ∏è</span>
              <span>Compute safe windows</span>
            </button>
            <button type="button" id="plannerAddEvent" class="btn sm">
              <span class="icon">üìÖ</span>
              <span>Add top suggestion as Release event</span>
            </button>
            <span class="muted" style="font-size:11px;">
              Windows are scored using F&amp;B service patterns, bug history, holidays &amp; change-calendar collisions.
            </span>
          </div>

          <div class="divider"></div>

          <!-- Assignment block INSIDE Release Planner card -->
          <div style="margin-top:4px;">
            <div style="display:flex;justify-content:space-between;align-items:flex-end;gap:8px;flex-wrap:wrap;">
              <div>
                <div style="font-size:13px;font-weight:600;">Assign tickets to Release plan</div>
                <div class="muted" style="font-size:11px;margin-top:2px;">
                  Ticket list is driven by the <strong>current filters</strong> in the Issues tab.
                  Select one or more tickets, select the Release event, then assign.
                </div>
              </div>
            </div>

            <div class="planner-grid" style="margin-top:10px;">
              <div>
                <label for="plannerTickets" class="muted" style="font-size:12px;">Tickets (filtered)</label>
                <select
                  id="plannerTickets"
                  multiple
                  size="6"
                  class="select"
                  style="width:100%;margin-top:4px;min-height:120px;"
                >
                  <!-- Filled dynamically by refreshPlannerTickets() -->
                </select>
                <div class="muted" style="font-size:11px;margin-top:2px;">
                  This list reflects all issues matching the current search &amp; filters.
                </div>
              </div>

              <div>
                <label for="plannerReleasePlan" class="muted" style="font-size:12px;">Release events in horizon</label>
                <select
                  id="plannerReleasePlan"
                  class="select"
                  style="width:100%;margin-top:4px;"
                >
                  <!-- Filled dynamically by refreshPlannerReleasePlans() -->
                </select>
                <div class="muted" style="font-size:11px;margin-top:2px;">
                  Release events are read from the change calendar for the selected environment and horizon.
                </div>
              </div>

              <div style="display:flex;flex-direction:column;justify-content:flex-start;gap:8px;">
                <span class="muted" style="font-size:12px;">Actions</span>
                <button
                  type="button"
                  id="plannerAssignBtn"
                  class="btn primary sm"
                  style="margin-top:4px;white-space:nowrap;"
                >
                  <span class="icon">üß∑</span>
                  <span>Assign ticket(s)</span>
                </button>
                <div class="muted" style="font-size:11px;">
                  Tickets will be added to the selected Release event‚Äôs <code>issueId</code> list and reflected in the calendar &amp; AI insights.
                </div>
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <!-- Suggested slots -->
          <div style="margin-top:4px;">
            <div style="font-size:13px;font-weight:600;margin-bottom:4px;">Suggested windows</div>
            <div id="plannerResults" style="font-size:13px;">
              <span class="muted">Run the planner to see the safest windows for this release.</span>
            </div>
          </div>
        </section>
      </section>
    </section>
  </main>

  <!-- Issue modal -->
  <div id="issueModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <div class="header">
        <h2 id="modalTitle">Issue</h2>
        <button type="button" id="modalClose" class="modal-close" aria-label="Close">‚úï</button>
      </div>
      <div id="modalBody" style="font-size:13px;"></div>
      <div class="actions" style="margin-top:10px;">
        <button type="button" id="copyId" class="btn sm">
          <span class="icon">üîó</span>
          <span>Copy ID</span>
        </button>
        <button type="button" id="copyLink" class="btn ghost sm">
          <span class="icon">üìã</span>
          <span>Copy summary</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Event modal -->
  <div
    id="eventModal"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="eventModalTitle"
  >
    <div class="modal-content">
      <div class="header">
        <h2 id="eventModalTitle">Event</h2>
        <button
          type="button"
          id="eventModalClose"
          class="modal-close"
          aria-label="Close"
        >
          ‚úï
        </button>
      </div>
      <form id="eventForm">
        <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;">
          <div>
            <label class="muted" style="font-size:12px;">Title</label>
            <input id="eventTitle" class="input" required />
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Type</label>
            <select id="eventType" class="select">
              <option value="Deployment">Deployment</option>
              <option value="Maintenance">Maintenance</option>
              <option value="Release">Release</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Environment</label>
            <select id="eventEnv" class="select">
              <option value="Prod">Production</option>
              <option value="Staging">Staging</option>
              <option value="Dev">Development</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Change status</label>
            <select id="eventStatus" class="select">
              <option value="Planned">Planned</option>
              <option value="In progress">In progress</option>
              <option value="Completed">Completed</option>
              <option value="Cancelled">Cancelled</option>
            </select>
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Owner</label>
            <input id="eventOwner" class="input" />
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Modules (comma-separated)</label>
            <input id="eventModules" class="input" />
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Impact</label>
            <select id="eventImpactType" class="select">
              <option value="No downtime expected">No downtime expected</option>
              <option value="Customer-facing impact">Customer-facing impact</option>
              <option value="Partial downtime">Partial downtime</option>
              <option value="Full downtime">Full downtime</option>
            </select>
          </div>
          <div>
            <label class="muted" style="font-size:12px;">Linked ticket IDs</label>
            <input
              id="eventIssueId"
              class="input"
              placeholder="e.g. INC-123, INC-456"
            />
          </div>
        </div>

        <div style="margin-top:10px;">
          <label class="muted" style="font-size:12px;">
            <input type="checkbox" id="eventAllDay" />
            All-day
          </label>
        </div>

        <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:8px;">
          <div>
            <label class="muted" style="font-size:12px;">Start</label>
            <input id="eventStart" type="datetime-local" class="input" />
          </div>
          <div>
            <label class="muted" style="font-size:12px;">End</label>
            <input id="eventEnd" type="datetime-local" class="input" />
          </div>
        </div>

        <div style="margin-top:10px;">
          <label class="muted" style="font-size:12px;">Description</label>
          <textarea
            id="eventDescription"
            class="input"
            style="width:100%;min-height:70px;border-radius:12px;resize:vertical;"
          ></textarea>
        </div>

        <div
          id="eventIssueLinkedInfo"
          class="muted"
          style="font-size:12px;margin-top:8px;display:none;"
        ></div>

        <div class="actions" style="margin-top:12px;">
          <button type="submit" id="eventSave" class="btn primary sm">
            <span class="icon">üíæ</span>
            <span>Save</span>
          </button>
          <button type="button" id="eventCancel" class="btn ghost sm">
            <span>Cancel</span>
          </button>
          <button type="button" id="eventDelete" class="btn sm" style="margin-left:auto;">
            <span class="icon">üóë</span>
            <span>Delete</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Spinner overlay -->
  <div id="spinner" class="spinner" aria-hidden="true">
    <div class="ring"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

  <!-- App -->
  <script src="app.js"></script>
</body>
</html>
