<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Attendance Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <style>
    /* Based on the style of the example you gave */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f0f2f5;
      color: #444;
    }
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: #1f2937;
      color: white;
      padding: 20px;
      overflow-y: auto;
    }
    .sidebar h2 {
      margin-bottom: 24px;
      font-size: 1.5em;
    }
    .sidebar nav a {
      display: block;
      color: #cbd5e1;
      padding: 12px 16px;
      border-radius: 4px;
      margin-bottom: 4px;
      text-decoration: none;
    }
    .sidebar nav a:hover, .sidebar nav a.active {
      background: #374151;
      color: white;
    }
    .main {
      margin-left: 260px;
      padding: 24px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .header h1 {
      font-size: 1.8em;
    }
    .btn-primary {
      background: #3b82f6;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-secondary {
      background: #9ca3af;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    .kpi-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
    }
    .kpi-card .num {
      font-size: 2em;
      margin-top: 8px;
      color: #111827;
    }
    .charts {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 32px;
    }
    .chart-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .table-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow-x: auto;
      margin-bottom: 32px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
    }
    th {
      background: #f9fafb;
      font-weight: 600;
    }
    .action-btn {
      margin-right: 8px;
      padding: 4px 8px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .action-btn.edit {
      background: #10b981;
      color: white;
    }
    .action-btn.delete {
      background: #ef4444;
      color: white;
    }
    .action-btn.approve {
      background: #3b82f6;
      color: white;
    }
    .action-btn.reject {
      background: #f97316;
      color: white;
    }
    .hidden {
      display: none;
    }
    @media (max-width: 800px) {
      .charts {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>Attendance</h2>
    <nav>
      <a href="#dashboard" class="active" data-tab="dashboard">Dashboard</a>
      <a href="#signin" data-tab="signin">Sign In</a>
      <a href="#signout" data-tab="signout">Sign Out</a>
      <a href="#leaves" data-tab="leaves">Leaves</a>
      <a href="#balances" data-tab="balances">Balances</a>
      <a href="#holidays" data-tab="holidays">Holidays</a>
      <a href="#settings" data-tab="settings">Settings</a>
    </nav>
  </div>

  <div class="main">
    <div class="header">
      <h1>Dashboard</h1>
      <div>
        <button class="btn-primary" id="btnAdd">Add +</button>
      </div>
    </div>

    <!-- KPI Cards -->
    <div class="kpi-grid" id="kpiSection">
      <div class="kpi-card">
        <div>Total Employees</div>
        <div class="num" id="kpiEmployees">0</div>
      </div>
      <div class="kpi-card">
        <div>Present Today</div>
        <div class="num" id="kpiPresent">0</div>
      </div>
      <div class="kpi-card">
        <div>On Leave</div>
        <div class="num" id="kpiLeave">0</div>
      </div>
      <div class="kpi-card">
        <div>Absent</div>
        <div class="num" id="kpiAbsent">0</div>
      </div>
    </div>

    <!-- Charts -->
    <div class="charts">
      <div class="chart-card">
        <h3>Attendance Trend</h3>
        <canvas id="trendChart" height="100"></canvas>
      </div>
      <div class="chart-card">
        <h3>Leaves Distribution</h3>
        <canvas id="leaveChart" height="100"></canvas>
      </div>
    </div>

    <!-- Tables -->
    <div class="table-card hidden" id="tab-dashboard">
      <h3>Latest Sign-ins</h3>
      <table id="tableLatestSignIn">
        <thead><tr><th>Date</th><th>Employee</th><th>Time</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-signin">
      <h3>Sign In Records</h3>
      <table id="tableSignIn">
        <thead><tr><th>Date</th><th>Employee</th><th>Time</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-signout">
      <h3>Sign Out Records</h3>
      <table id="tableSignOut">
        <thead><tr><th>Date</th><th>Employee</th><th>Time</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-leaves">
      <h3>Leave Requests</h3>
      <table id="tableLeaves">
        <thead><tr><th>Date</th><th>Employee</th><th>Type</th><th>Status</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-balances">
      <h3>Leave Balances</h3>
      <table id="tableBalances">
        <thead><tr><th>Employee</th><th>Annual</th><th>Sick</th><th>Unpaid</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-holidays">
      <h3>Holidays</h3>
      <table id="tableHolidays">
        <thead><tr><th>Date</th><th>Name</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="table-card hidden" id="tab-settings">
      <h3>Settings</h3>
      <p>Configure working hours, default leaves, etc.</p>
      <!-- form fields for settings -->
    </div>
  </div>

  <script>
    // Tab navigation logic
    document.querySelectorAll('.sidebar nav a').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        document.querySelectorAll('.sidebar nav a').forEach(x => x.classList.remove('active'));
        a.classList.add('active');
        const tab = a.dataset.tab;
        document.querySelectorAll('.table-card').forEach(div => {
          div.classList.add('hidden');
        });
        document.getElementById('tab-' + tab).classList.remove('hidden');
        document.querySelector('.main .header h1').innerText = a.innerText;
      });
    });

    // Charts example (dummy)
    new Chart(document.getElementById('trendChart'), {
      type: 'line',
      data: {
        labels: ['Mon','Tue','Wed','Thu','Fri'],
        datasets: [{
          label: 'Hours',
          data: [8,7.5,9,8,7],
          borderColor: '#3b82f6',
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          tension: 0.3
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    new Chart(document.getElementById('leaveChart'), {
      type: 'pie',
      data: {
        labels: ['Annual','Sick','Unpaid'],
        datasets: [{
          data: [12,4,2],
          backgroundColor: ['#10b981','#f59e0b','#ef4444']
        }]
      }
    });

    // You will populate tables via JS fetching from your Apps Script backend
    // e.g., fetch('/exec', { method:'POST', body: JSON.stringify({secret, sheet:'SignIn', action:'list'}) })
  </script>
</body>
</html>
